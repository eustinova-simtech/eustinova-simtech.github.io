(self.webpackChunkpwajet=self.webpackChunkpwajet||[]).push([[191],{75279:function(e,t,a){"use strict";a.d(t,{Z:function(){return I}});var n=a(37703),r=a(67154),s=a.n(r),i=a(67294),o=a(86933),l=a(34051),c=a(31555),u=a(45976),m=a(54382),p=a(54709),d=a(63038),_=a.n(d),f=a(59713),b=a.n(f),v=a(23279),g=a.n(v),P=a(39565),E=a(74888),h=a(40395),y=(0,h.defineMessages)({nameTitle:{id:"app.components.reviews.form.name-title",defaultMessage:"Name"},textareaTitle:{id:"app.components.reviews.form.textarea-title",defaultMessage:"Your feedback"},submitTitle:{id:"app.components.reviews.form.submit-title",defaultMessage:"Send"},savedAsDraft:{id:"app.common.saved-as-draft",defaultMessage:"Saved as draft"},clear:{id:"app.common.clear",defaultMessage:"Clear"}}),w=a(34138),T=a(38964),N=a(45321),Z=a(50914),k=a(50928),R="reviewThread/form/TestimonialForm";function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){b()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=i.lazy((function(){return Promise.all([a.e(110),a.e(3918),a.e(9631),a.e(7178),a.e(9916),a.e(6379)]).then(a.bind(a,69916))})),x=a(4903),D=a(33936),C=(0,n.$j)((function(e,t){return{draft:(0,D.nF)(e,t),isSuccess:(0,D.sM)(e,t),isLogged:e.Auth.isLogged}}),(function(e){return{createDraft:function(t){return e(x.P2u(t))},removeDraft:function(t){return e(x.hG5(t))}}}))((function(e){var t=e.withRating,a=e.withReviews,n=e.createDraft,r=e.id,l=e.type,c=e.draft,m=e.removeDraft,p=e.isSuccess,d=[];e.isLogged||d.push({name:"reviewName",type:E.Z.TEXT,isRequired:!0,isEnabled:!0,label:P.ZP.formatMessage(M({},y.nameTitle))}),d.push({name:"reviewMessage",type:E.Z.MULTILINE_TEXT,isRequired:!0,isEnabled:!0,label:P.ZP.formatMessage(M({},y.textareaTitle))});var f=(0,k.Z)({sections:[{id:"testimonial",fields:d}]}),b=t?c?c.rating:3:void 0,v=i.useRef(p),h=i.useState({rating:b,name:null==c?void 0:c.name,message:null==c?void 0:c.text}),j=_()(h,2),x=j[0],D=j[1],C=i.useState(!(!t||a)),q=_()(C,2),F=q[0],S=q[1],A=i.useMemo((function(){return g()((function(e){return n(new w.Z({parentId:r,parentType:l,rating:e.rating,text:e.message,name:e.name,isFinal:!1}))}),500)}),[n,r,l]);return i.useEffect((function(){!1===v.current&&p&&D({rating:3}),v.current=p}),[p]),i.createElement(T.Z,{loading:!!c&&c.isFinal,__source:{parentProps:e,name:R}},i.createElement("div",{className:"b-testimonial-form",__source:{parentProps:e,name:R}},t&&i.createElement(u.default,{rating:x.rating||3,name:"testimonial-form",onChange:function(e){return function(e){var t=x.rating,a=x.message,n=x.name;D({rating:e,name:n,message:a}),t&&(a||n)&&A(x)}(e)},big:!0,showRatingText:!0,__source:{parentProps:e,name:R}}),!!c&&i.createElement("span",{className:"b-testimonial-form__draft-notification animated fadeIn",__source:{parentProps:e,name:R}},i.createElement(o.Z,s()({},y.savedAsDraft,{__source:{parentProps:e,name:R}}))),a&&i.createElement(i.Suspense,{fallback:null,__source:{parentProps:e,name:R}},i.createElement(O,{enableReinitialize:!0,onChange:function(e,t){!function(e){var t=e.reviewName,a=e.reviewMessage,n=x.rating,s=x.message;D({rating:n,name:t,message:a}),s?A(x):(A.cancel(),c&&m((0,N.r)(r,l)))}(e),function(e){S(e)}(t)},isRequesting:!!c&&c.isFinal,schema:f,initialValues:{reviewMessage:x.message,reviewName:x.name},__source:{parentProps:e,name:R}})),i.createElement("div",{className:"b-testimonial-form__footer",__source:{parentProps:e,name:R}},i.createElement(Z.Z,{appearance:"primary",className:"b-testimonial-form__submit",disabled:!F,onClick:function(){n(new w.Z({parentId:r,parentType:l,rating:x.rating,text:x.message,name:x.name,isFinal:!0}))},__source:{parentProps:e,name:R}},i.createElement(o.Z,s()({},y.submitTitle,{__source:{parentProps:e,name:R}}))),!!c&&i.createElement(Z.Z,{appearance:"dark",className:"b-testimonial-form__clear-button animated fadeIn",onClick:function(){return m((0,N.r)(r,l)),D({rating:3}),void A.cancel()},__source:{parentProps:e,name:R}},i.createElement(o.Z,s()({},y.clear,{__source:{parentProps:e,name:R}}))))))})),q=a(42140),F=a(77550),S=(0,h.defineMessages)({title:{id:"app.components.reviews.title",defaultMessage:"Ratings & reviews"},noContent:{id:"app.components.reviews.no-content",defaultMessage:"No reviews available"}}),A="reviewThread/ReviewThread",I=(0,n.$j)((function(e,t){return{thread:(0,D.EA)(e,t),isRequesting:(0,D.uV)(e,t)}}),(function(e){return{requestReviewThread:function(t,a,n,r){return e(x.hy5(t,a,n,r))}}}))((function(e){var t=e.type,a=e.id,n=e.requestReviewThread,r=e.thread,d=e.isRequesting,_=e.shouldRequestThread,f=void 0===_||_;if(i.useEffect((function(){f&&n(a,t)}),[f,a,t,n]),!r)return i.createElement(i.Fragment,null,d?i.createElement(F.default,{__source:{parentProps:null,name:A}}):i.createElement(o.Z,s()({},S.noContent,{__source:{parentProps:null,name:A}})));var b=r.selection,v=r.selection.pagination;return i.createElement("div",{className:"b-review-thread",__source:{parentProps:e,name:A}},i.createElement("h2",{className:"b-review-thread__title",__source:{parentProps:e,name:A}},i.createElement(o.Z,s()({},S.title,{__source:{parentProps:e,name:A}}))),i.createElement(u.default,{name:"rating-".concat(a),rating:r.rating,totalTestimonials:r.totalTestimonials,big:!0,showRatingText:!0,__source:{parentProps:e,name:A}}),i.createElement(p.default,{__source:{parentProps:e,name:A}}),i.createElement("div",{className:"b-review-thread__reviews",__source:{parentProps:e,name:A}},r.selection.testimonials.map((function(e){return i.createElement(i.Fragment,{key:e.id,__source:{parentProps:null,name:A}},i.createElement(m.default,{testimonial:e,__source:{parentProps:null,name:A}}),i.createElement(p.default,{__source:{parentProps:null,name:A}}))}))),v&&i.createElement(q.default,{limit:v.limit,page:v.page,total:v.total,isLoading:d,onLoadMore:function(){n(a,t,b.nextPage(),!0)},__source:{parentProps:e,name:A}}),!r.isReadonly&&i.createElement(l.Z,{__source:{parentProps:e,name:A}},i.createElement(c.Z,{md:{span:9,offset:3},__source:{parentProps:e,name:A}},i.createElement(C,{id:r.parentId,type:r.parentType,withRating:r.withRaiting,withReviews:r.withReviews,__source:{parentProps:e,name:A}}))))}))},51092:function(e,t,a){"use strict";a.r(t);var n=a(67294),r=a(35161),s=a.n(r),i=a(62686),o=a(43806),l=a(54709),c="subcomponents/key-value-table/KeyValueTable";t.default=function(e){var t=e.items,a=e.justify,r=e.className,u=e.showEmpty,m=e.title,p=e.topDivider,d=void 0===p||p,_=e.bottomDivider,f=void 0===_||_,b=Array.isArray(t)?t:s()(t,(function(e,t){return{key:t,value:e}})),v=!b.length||b.every((function(e){return!e.value}));return!v||u?n.createElement("div",{className:(0,o.Z)("b-key-value-table",r||!1),__source:{parentProps:e,name:c}},!v&&d&&n.createElement(l.default,{className:"b-key-value-table__divider",__source:{parentProps:e,name:c}}),m&&n.createElement("h4",{className:"b-key-value-table__title",__source:{parentProps:e,name:c}},m),n.createElement("table",{className:(0,i.Z)("b-key-value-table__table",!!a&&"justify"),__source:{parentProps:e,name:c}},n.createElement("tbody",{__source:{parentProps:e,name:c}},b.map((function(e){return(e.value||u)&&n.createElement("tr",{className:"b-key-value-table__item",key:e.key,__source:{parentProps:null,name:c}},n.createElement("th",{className:"b-key-value-table__item-description",__source:{parentProps:null,name:c}},e.key),n.createElement("td",{className:"b-key-value-table__item-value",__source:{parentProps:null,name:c}},e.value))})))),!v&&f&&n.createElement(l.default,{className:"b-key-value-table__divider",__source:{parentProps:e,name:c}})):null}},75557:function(e,t,a){"use strict";a.r(t);var n=a(67294),r=a(45976),s=a(38964),i="subcomponents/rating/overview/RatingOverview";t.default=function(e){var t=e.thread,a=e.isRequesting;return a||t?n.createElement(s.Z,{loading:a,__source:{parentProps:e,name:i}},!!t&&n.createElement(r.default,{rating:t.rating,totalTestimonials:t.totalTestimonials,name:"".concat(t.parentType,"-rating"),readonly:!0,showRatingText:!0,__source:{parentProps:e,name:i}})):null}},99616:function(e,t,a){"use strict";a.r(t);var n=a(37703),r=a(75557),s=a(33936);t.default=(0,n.$j)((function(e,t){return{thread:(0,s.EA)(e,t),isRequesting:(0,s.uV)(e,t)}}),(function(){return{}}))(r.default)},38097:function(e,t,a){"use strict";a.r(t);var n=a(63038),r=a.n(n),s=a(67294),i=a(70065),o=a(68739),l="subcomponents/tabs/Tabs";t.default=function(e){var t=e.panels,a=e.ariaLabel,n=e.children,c=s.useState(0),u=r()(c,2),m=u[0],p=u[1];return s.createElement(s.Fragment,null,s.createElement(i.Z,{value:m,onChange:function(e,t){p(t)},variant:"scrollable",scrollButtons:"off",indicatorColor:"primary",textColor:"primary","aria-label":a,classes:{root:"b-tabs",indicator:"b-tabs__indicator"},__source:{parentProps:e,name:l}},n),t.map((function(e,t){return s.createElement(o.default,{key:"panel-".concat(t),index:t,value:m,className:"animated fadeIn",__source:{parentProps:null,name:l}},e)})))}},68739:function(e,t,a){"use strict";a.r(t);var n=a(67154),r=a.n(n),s=a(6479),i=a.n(s),o=a(67294),l=a(43806);t.default=function(e){var t=e.children,a=e.value,n=e.index,s=e.className,c=i()(e,["children","value","index","className"]);return o.createElement("div",r()({className:(0,l.Z)("b-tab-panel",s),role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},c,{__source:{parentProps:e,name:"subcomponents/tabs/panel/TabPanel"}}),n===a&&t)}},38235:function(e,t,a){"use strict";a.r(t);var n=a(67154),r=a.n(n),s=a(6479),i=a.n(s),o=a(67294),l=a(41423);t.default=function(e){e.children;var t=e.label,a=i()(e,["children","label"]);return o.createElement(l.Z,r()({label:t},a,{classes:{root:"b-tab",textColorPrimary:"b-tab--color",selected:"b-tab--selected"},__source:{parentProps:e,name:"subcomponents/tabs/tab/Tab"}}))}},54382:function(e,t,a){"use strict";a.r(t);var n=a(67294),r=a(34051),s=a(31555),i=a(40395),o=a(45976),l="subcomponents/testimonial/Testimonial";t.default=function(e){var t=e.testimonial;return n.createElement("div",{className:"b-testimonial",__source:{parentProps:e,name:l}},n.createElement(r.Z,{__source:{parentProps:e,name:l}},n.createElement(s.Z,{xs:12,sm:3,__source:{parentProps:e,name:l}},n.createElement("div",{className:"b-testimonial__author",__source:{parentProps:e,name:l}},t.author)),n.createElement(s.Z,{__source:{parentProps:e,name:l}},n.createElement("div",{className:"b-testimonial__content",__source:{parentProps:e,name:l}},n.createElement("div",{className:"b-testimonial__info",__source:{parentProps:e,name:l}},n.createElement(o.default,{name:"testimonial-".concat(t.id),rating:t.rating,__source:{parentProps:e,name:l}}),n.createElement("div",{className:"b-testimonial__date",__source:{parentProps:e,name:l}},n.createElement(i.FormattedDate,{value:new Date(t.createdAt),year:"numeric",month:"long",day:"2-digit",__source:{parentProps:e,name:l}}))),n.createElement("div",{__source:{parentProps:e,name:l}},t.text)))))}}}]);
//# sourceMappingURL=191.7ed4bce03d793784de99.chunk.js.map